---
title: 代码的味道
date: 2023-08-25 09:42:46
category: 前端剑宗专栏
---

究竟什么样的代码才是高质量可维护的代码（没有味道的代码）？什么样的组件才能叫作好的组件？函数怎么写才是干净、高效、得体的？**瓦卡利马僧但是，本文中我们尝试着去瓦卡利。**


#### 1.组件化编程，单组件代码量限制在500行以内，能拆则拆。
随着业务量代码的积累，自己突然感觉有点力不从心：代码太容易成为“屎山”了。就拿目前项目的一个场景举例：写一个创建任务的表单组件。听起来很简单是吧？是很简单，但写起来，极度费劲。原因在于，该创建表单项过多，且伴随着各种联动需求。一开始愣头愣脑的上去就是干。写到一半，发现已经写不下去了---->该文件已经超过了1000行，变量无数，单单flag就十几二十来个，如若再这么写下去，我估计即使勉强实现了需求，**后面接手的人都会顺着网线来砍我**。此时的我，**内心是崩溃的。**
你能够想象，在一个单文件代码超过**1000行**游走是什么感觉吗？望着这座自己亲手堆砌的半坐“屎山“，觉得自己有义务寻求一些解决方案，免得被后人耻笑。简单的讲就是一个字：**拆**。在《**重构**》这本书的指导下，疯狂拆分这座屎山，当然，这个过程也是无偿加班的过程。最终单文件代码量干到了300来行，虽然被拆出去的儿子组件的可复用性几乎为0，但当自己看着不超过400行代码的主组件时，心情极度舒适，行云流水的代码结构，此刻的内心：**至少后人不会来砍我。**

**问题来了，如何写好一个组件？**
拆分的意义：在拆分的过程中，我一直有个疑虑：我的本意应该是搭积木式编程，不仅仅只是为了减少单个文件代码量，更希望拆出来的组件日后能够复用，但是现实却是，拆出来的代码几乎找不到复用的场景。又或者跟当初引用其的父组件关联度高导致无法复用。所以现实就是，为了拆而拆，郁闷。