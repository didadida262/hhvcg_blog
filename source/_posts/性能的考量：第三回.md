---
title: 性能的考量：第三回
category: 性能的考量
date: 2023-08-03 20:46:07
tags:
---

**本文主介绍canvas的性能优化策略**

关于性能问题,实际上,针对于类似管理系统这样的项目而言,不需要关注太多,也没那必要.但是对于图形编程类的项目而言,则是至关重要的指标.关乎生死.
### 先点名canvas的耗时因素
1. 图形的数量
2. 图形的大小。
3. 高质量、大文件的图片（画在画布上）

图形编程类的项目,关注性能问题的原因,在于交互体验。比如我们废了半天劲写了一个web端的cs射击游戏,当我兴奋的准备往前走两步时,发现页面直接给我来了个帧数级别的慢动作,江湖说法叫做"卡成狗"，用户体验几乎为0。这种完全不能玩的应用,如同垃圾。

### 我们首先来定义一下, 什么叫做卡?
"卡顿"原理可以解释为,每一帧js主线程执行的事情过多,导致帧内时间没来得及干完,即当前帧耗时超过分配的帧时间。那么什么是"分配的帧时间?之前说了,60hz举例,一秒钟60帧,那么一帧的时间大约在16.7ms.所以,如果在一帧内的耗时超过了16.7ms,就会出现视觉层面的"卡"。目前主流的屏幕基本都是60hz,也就是显示器,以每秒60次的频率闪频,也就是一秒钟会有60帧,但我们人眼无法察觉。