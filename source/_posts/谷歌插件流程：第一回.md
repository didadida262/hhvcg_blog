---
title: 谷歌插件流程：第一回
category: 大前端气宗专栏
date: 2023-08-03 21:55:39
tags:
---
相信经常使用chrome的小伙伴们，对其丰富的插件工具不会陌生。比如下载页面视频、音乐等等等。那么这些工具究竟是如何编写的呢？本文将以谷歌官方实例为基础，简单介绍chrome插件的开发流程，最后我们将尝试，写一个自己的视频下载器插件。部分内容参考下面地址文章
> http://runxinzhi.com/wintertone-p-12053751.html

#### 1. 第一步创建一个空的文件夹，后创建manifest.json文件，可以理解为整个插件的名片，代码如下。
```json
{
  "name": "Ta-da",
  "description": "download_zhihu_short_video",
  "version": "1.0",
  "manifest_version": 3,
  "background": {
    "service_worker": "background.js"
  },
  "permissions": ["storage", "activeTab", "scripting"],
}  
```

#### 2. 创建background.js文件。manifest.json文件中的background字段，是一个包含service_worker属性的对象，可以理解为该插件的环境，官方叫做服务视图。这里我们指定服务视图为background.js文件，代码如下：
```javascript
let color = 'red';
chrome.runtime.onInstalled.addListener(() => {
  chrome.storage.sync.set({ color });
});
```
**到目前为止，我们已经可以把当前文件夹作为插件文件夹导入chrome浏览器中。首先在地址栏中输入chrome://extensions/打开扩展程序页面，点击页面顶部第一个选项“加载已解压的扩展程序”导入文件夹，然后就能看到如下所示的插件卡片：**

<img src="/img/chrome1.png" alt="图片描述" width="500">
